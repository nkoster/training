function filter(e){filterText=e;var t=9*(e.length+1);t>inputMinSize?(document.getElementById("freetext").style.width=t+"px",document.getElementById("freetext").style.minWidth=t+"px",document.getElementById("freetext").style.maxWidth=t+"px"):(document.getElementById("freetext").style.width=inputMinSize+"px",document.getElementById("freetext").style.minWidth=inputMinSize+"px",document.getElementById("freetext").style.maxWidth=inputMinSize+"px")}function updateMonitor(e){for(monitor[counter]=e,div="",i=0;i<monitor.length;i++){var t=monitor[i].split(" "),n=parseFloat(t[1]),o="#2f5";n>1&&(o="#fa3"),n>2&&(o="#f32");var c=n.toFixed(3);c=new Array(7-c.length).join(" ")+c;var r=t[0],l=t[2];l=new Array(17-l.length).join(" ")+l;var s=t[3],a="normal",d="none";i==counter&&(a="bold",d=o,o="black"),div+='<div class="monitor" style="color:'+o+";font-weight:"+a+";background:"+d+'"> '+r+"   "+c+" "+l+"   "+s+"</div>\n"}screenChanged&&(screenChanged=!1,monitor.splice(numberOfLines),div.split("\n").slice(numberOfLines).join("\n"),counter>numberOfLines&&(counter=numberOfLines)),document.getElementById("monitor").innerHTML=""+div,numberOfLines-1>counter?counter+=1:counter=0,timeout=0}function handleKeyDown(e){var t=0,n=0,o=0,i=null==e?event:e;return o=i.shiftKey,n=i.altKey,t=i.ctrlKey,self.status="shiftKey="+o+", altKey="+n+", ctrlKey="+t,(n||t)&&70==i.keyCode&&(filterMenu?(document.getElementById("overlay").style.transition="opacity 0.4s",document.getElementById("filter").style.transition="opacity 0.5s",document.getElementById("overlay").style.opacity="0.0",document.getElementById("filter").style.opacity="0.0",filterMenu=!1):(document.getElementById("overlay").style.transition="opacity 0.5s",document.getElementById("filter").style.transition="opacity 0.5s",document.getElementById("overlay").style.opacity="0.4",document.getElementById("filter").style.opacity="0.9",document.getElementById("freetext").focus(),filterMenu=!0)),!0}!function(e,t){"function"==typeof define&&define.amd?define([],t):"undefined"!=typeof module&&module.exports?module.exports=t():e.ReconnectingWebSocket=t()}(this,function(){function e(t,n,o){function i(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}var c={debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:2e3,maxReconnectAttempts:null};o||(o={});for(var r in c)this[r]="undefined"!=typeof o[r]?o[r]:c[r];this.url=t,this.reconnectAttempts=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var l,s=this,a=!1,d=!1,u=document.createElement("div");u.addEventListener("open",function(e){s.onopen(e)}),u.addEventListener("close",function(e){s.onclose(e)}),u.addEventListener("connecting",function(e){s.onconnecting(e)}),u.addEventListener("message",function(e){s.onmessage(e)}),u.addEventListener("error",function(e){s.onerror(e)}),this.addEventListener=u.addEventListener.bind(u),this.removeEventListener=u.removeEventListener.bind(u),this.dispatchEvent=u.dispatchEvent.bind(u),this.open=function(t){if(l=new WebSocket(s.url,n||[]),t){if(this.maxReconnectAttempts&&this.reconnectAttempts>this.maxReconnectAttempts)return}else u.dispatchEvent(i("connecting")),this.reconnectAttempts=0;(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","attempt-connect",s.url);var o=l,c=setTimeout(function(){(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","connection-timeout",s.url),d=!0,o.close(),d=!1},s.timeoutInterval);l.onopen=function(n){clearTimeout(c),(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onopen",s.url),s.protocol=l.protocol,s.readyState=WebSocket.OPEN,s.reconnectAttempts=0;var o=i("open");o.isReconnect=t,t=!1,u.dispatchEvent(o)},l.onclose=function(n){if(clearTimeout(c),l=null,a)s.readyState=WebSocket.CLOSED,u.dispatchEvent(i("close"));else{s.readyState=WebSocket.CONNECTING;var o=i("connecting");o.code=n.code,o.reason=n.reason,o.wasClean=n.wasClean,u.dispatchEvent(o),t||d||((s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onclose",s.url),u.dispatchEvent(i("close")));var c=s.reconnectInterval*Math.pow(s.reconnectDecay,s.reconnectAttempts);setTimeout(function(){s.reconnectAttempts++,s.open(!0)},c>s.maxReconnectInterval?s.maxReconnectInterval:c)}},l.onmessage=function(t){(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onmessage",s.url,t.data);var n=i("message");n.data=t.data,u.dispatchEvent(n)},l.onerror=function(t){(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onerror",s.url,t),u.dispatchEvent(i("error"))}},1==this.automaticOpen&&this.open(!1),this.send=function(t){if(l)return(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","send",s.url,t),l.send(t);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(e,t){"undefined"==typeof e&&(e=1e3),a=!0,l&&l.close(e,t)},this.refresh=function(){l&&l.close()}}if("WebSocket"in window)return e.prototype.onopen=function(e){},e.prototype.onclose=function(e){},e.prototype.onconnecting=function(e){},e.prototype.onmessage=function(e){},e.prototype.onerror=function(e){},e.debugAll=!1,e.CONNECTING=WebSocket.CONNECTING,e.OPEN=WebSocket.OPEN,e.CLOSING=WebSocket.CLOSING,e.CLOSED=WebSocket.CLOSED,e});var lineHeight=17,monitorHeight=window.innerHeight,numberOfLines=Math.floor(monitorHeight/lineHeight)-1;3>numberOfLines&&(numberOfLines=3);var timeoutThreshold=30,timeout=0,monitor=[],counter=0,div="",screenChanged=!1,filterMenu=!1,filterText="",inputMinSize=200,host=window.document.location.host.replace(/:.*/,"");ws=new ReconnectingWebSocket("ws://"+host+":"+location.port),ws.reconnectInterval=1e4,ws.onmessage=function(e){var t=""+e.data,n=t.split(" ");if(n.length>3){var o=parseFloat(n[1]);if(!isNaN(o)){var i=filterText.replace(/\s+$/,"").split(" "),c=!0,r=i.length;for(nn=0;nn<r;nn++){var l=i[nn],s=!1,a=!1,d=!1,u=!1,m=0;if("!"==l[0]&&(l=l.replace(/\!/,""),s=!0),">"==l[0]?(l=l.replace(/\>/,""),a=!0,d=!0):d=!1,"<"==l[0]?(l=l.replace(/\</,""),a=!0,u=!0):u=!1,a&&(m=parseFloat(l),isNaN(m)&&(m=0),l=""),0!=l.length||a){if(d&&(o>m||(c=!1)),u&&(m>o||(c=!1)),!a)if(l.indexOf("|")>0){var f=l.replace(/\|$/,"").split("|"),g=f.length,p=!1;for(nnn=0;nnn<g;nnn++){var y=f[nnn];t.indexOf(y)>0&&(p=!0)}p||(c=!1)}else s?t.indexOf(l)<0||(c=!1):t.indexOf(l)>0||(c=!1)}else c=!0}0==filterText.indexOf("#")&&(c=!0),c&&updateMonitor(t)}}},window.onresize=function(){monitorHeight=window.innerHeight;var e=Math.floor(monitorHeight/lineHeight)-1;3>e&&(e=3),numberOfLines=e,screenChanged=!0},document.onkeydown=handleKeyDown;var state=0;setInterval(function(){timeout>timeoutThreshold?(document.getElementById("l2").style.transition="all 0.5s",document.getElementById("l2").style.background="#700"):(document.getElementById("l2").style.background="black",timeout++),filterText.length>0&&0!=filterText.indexOf("#")?(document.getElementById("filteralert").style.transition="all 0.9s",document.getElementById("filteralert").style.opacity="0.9",0==state?(document.getElementById("filteralert").style.background="#fe0",state=1):(document.getElementById("filteralert").style.background="#330",state=0)):document.getElementById("filteralert").style.opacity="0"},1e3);